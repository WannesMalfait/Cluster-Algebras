\section{Quantum cluster algebras}
\subsection{Quantum tori}

Some of the basic background needed on quantum tori, and rational actions.

\subsection{Quantum cluster algebras}

Toric frames, quantum seeds and mutations. Quantum Laurent phenomenon.

\subsection{Quantum Grassmannians}
???

\subsection{CGL extensions}

\textbf{Motivate section as a generic way to produce quantum cluster algebras.}

In this section we will look at a purely algebraic method of placing a quantum cluster
algebra structure on certain class of algebras as first presented in
\cite{GoodearlYakimov2017QCA}. Not only do these have the structure of a quantum
cluster algebra, they also equal the corresponding upper cluster algebra. Along the way
we will provide plenty of examples, to make it clear how the results can be applied in
practice.

\textbf{What is Ore extension. Example of Weyl algebra.}
\begin{definition}
	Let $R$ be a ring with unit, $\sigma \colon R \to R$ a ring endomorphism and
	$\delta \colon R \to R$ a $\sigma$-\emph{derivation}\index{ring!-derivation}, i.e.,
	$\delta$ is a group homomorphism $(R, +) \to (R, +)$ such that $\delta (r s) =
		\sigma(r)\delta(s) + \delta(r) s$. Then we write $R[x;\sigma, \delta]$ for the ring generated by $R$ and $x$ with the additional relation that
	\begin{equation*}
		x r = \sigma(r) x + \delta(r)
	\end{equation*}
	%
	for all $r \in R$. We call $R[x;\sigma, \delta]$ an \emph{Ore extension}\index{Ore
		extension} or \emph{skew polynomial ring}\index{ring!skew polynomial}. The conditions
	on $\sigma$ and $\delta$ ensure that the multiplication is well-defined.
\end{definition}
%
\begin{convention}
	%
	In what follows, when $R[x;\sigma, \delta]$ is an Ore extension, $R$ is a
	$\bbK$-algebra, $\sigma$ is a $\bbK$-algebra \emph{automorphism} and $\delta$ is a
	$\bbK$-linear $\sigma$-derivation. In this case, $R[x;\sigma, \delta]$ is also a
	$\bbK$-algebra.
\end{convention}
%
Under these assumptions, the Ore extension $R[x; \sigma, \delta]$ is Noetherian when
$R$ is Noetherian. It will also be a domain if $R$ is a domain.

\begin{example}
	Let $A_1$ be the $\bbK$-algebra generated by two variables $x$ and $y$ such that $yx =
		xy + 1$. This algebra is known as the \emph{Weyl algebra}\index{algebra!Weyl}. It can
	also be viewed as an Ore extension $\bbK[x][y; \id, \partial_x]$:
	\begin{itemize}
		\item The base algebra is the polynomial ring $\bbK[x]$.
		\item The algebra endomorphism $\sigma$ is the identity.
		\item The $\sigma$-derivation $\delta$ is the formal derivative with respect to $x$:
		      \begin{equation*}
			      \partial_x \left(\sum_{i=0}^n a_i x^i \right) = \sum_{i=1}^{n} a_i i x^{i-1}.
		      \end{equation*}
		      %
		      That $\partial_x$ is a derivation follows from the ordinary product rule for derivatives.
	\end{itemize}
\end{example}

\textbf{What is rational action of a torus.}

We borrow some definitions from \cite{GoodearlBrown2002LecturesAQC}. Let $\mcH$ be a
group, and $A$ a $\bbK$-algebra. We say that $\mcH$ \emph{acts on $A$ by
	automorphisms}\index{action!by automorphisms} if for every $h \in \mcH$, the map $A \to
	A \colon x \mapsto h \cdot x$ is a $\bbK$-algebra automorphism. A nonzero element $u
	\in A$ is called an \emph{$\mcH$-eigenvector}\index{H@$\mcH$!-eigenvector} if $\mcH
	\cdot u \subseteq \bbK u$. So, for each $h \in \mcH$ there exists some $\lambda_h \in
	\bbK$ such that $h \cdot u = \lambda_h u$. Since $\mcH$ acts by automorphisms,
$\lambda_h \neq 0$ for all $h \in \mcH$. So, we get a group homomorphism $\chi_u \colon
	\mcH \to \bbK^\times$ given by $\chi_u(h) = \lambda_h$. We call $\chi_u$ the
\emph{$\mcH$-eigenvalue}\index{H@$\mcH$!-eigenvalue} of $u$. Associated to each
$\mcH$-eigenvalue is its \emph{$\mcH$-eigenspace}\index{H@$\mcH$!-eigenspace}
\begin{equation*}
	A_\chi = \{u \in A \mid h \cdot x = \chi(h)x \forall h \in \mcH \}.
\end{equation*}
%
Finally, we say that the action is \emph{semisimple}\index{action!semisimple} if $A$ is
the direct sum of its $\mcH$-eigenspaces.

Now, let $\mcH$ be a \emph{$\bbK$-torus}\index{torus}, that is, a group of the form
$(\bbK^\times)^r$. By identifying $\mcH$ with the affine variety $\{(x_1, \dots, x_r,
	y) \in \bbK^{r+1} | x_1 \dots x_r y = 1\}$, we can view it as an algebraic group.
Assume that $\mcH$ acts on a $\bbK$-algebra $A$ by $\bbK$-algebra automorphisms. Then
we say that the action of $\mcH$ on $A$ is \emph{rational}\index{action!rational} if it
is semisimple, and all the corresponding $\mcH$-eigenvalues are morphisms of affine
varieties.

Write
\begin{equation*}
	X(\mcH) = \{\chi \in \Hom(\mcH, \bbK^\times) \mid \chi \text{ is a morphism of algebraic varieties}\},
\end{equation*}
%
for the character group\index{group!character} of $\mcH$. Then a rational action is the
same as an $X(\mcH)$-grading\index{grading} of $A$. Indeed, if we have a rational
action on $A$, then we can write
\begin{equation*}
	A = \bigoplus_{\chi \in X(\mcH)} A_\chi,
\end{equation*}
which is graded because for $a \in A_\chi, b \in A_{\chi'}$ and all $h \in \mcH$:
\begin{align*}
	h \cdot (a b) = (h\cdot a)(h\cdot b)= \chi(h)a \chi'(h)b = (\chi \chi')(h)ab,
\end{align*}
so that $ab \in A_{\chi \chi'}$. Conversely, if
\begin{equation*}
	A = \bigoplus_{g \in X(\mcH)} A_g
\end{equation*}
is a grading, then we get a rational action through
\begin{equation*}
	h \cdot x = h \cdot \left(\sum_{g \in X(\mcH)} x_g \right) = \sum_{g \in X(\mcH)} g(h)x.
\end{equation*}
%
Under this correspondence, the $\mcH$-eigenvectors are precisely the nonzero
homogeneous\index{element!homogeneous} elements under the grading.

\textbf{TODO: Examples}.

\textbf{Def CGL extension. Example of matrices, and Heisenberg algebra.}

The combination of a rational action by a torus and iterated Ore extensions gives rise
to the following definition:
\begin{definition}[\protect{\cite[Definition 3.3]{GoodearlYakimov2017QCA}}]\label{def:cgl_extension}
	An iterated Ore extension
	\begin{equation*}
		R = \bbK[x_1][x_2; \sigma_2, \delta_2]\cdots [x_N; \sigma_N, \delta_N]
	\end{equation*}
	is called a \emph{CGL extension}\index{CGL extension} if it is equipped with a rational action of a $\bbK$-torus $\mcH$ by $\bbK$-algebra automorphisms such that
	\begin{enumerate}
		\item\label{itm:x_i-eigenvectors} The elements $x_1, \dots, x_N$ are $\mcH$-eigenvectors.
		\item For every $k\in [2, N]$, $\delta_k$ is \emph{locally
			      nilpotent}\index{nilpotent!locally}, i.e., for all $r \in R_{k-1}$, there exists some
		      $n \in \bbZ_{>0}$ such that $\delta_k^n (r) = 0$. Here, $R_{k-1}$ denotes the
		      intermediate algebra consisting of only the first $k-1$ extensions:
		      \begin{equation*}
			      R_{k-1} = \bbK[x_1][x_2; \sigma_2, \delta_2]\cdots[x_{k-1};\sigma_{k-1}, \delta_{k-1}].
		      \end{equation*}
		      %
		      \item\label{itm:sigma_k-is-h_k} For every $k \in [1, N]$, there exists $h_k \in \mcH$ such that $\sigma_k$ is given by the action of $h_k$ on $R_{k-1}$ and the $h_k$-eigenvalue of $x_k$, is not a root of unity.
	\end{enumerate}
\end{definition}

We will call $N$ the length\index{CGL extension!length of} of the CGL extension. As
mentioned in the definition, we denote by $R_k$ the intermediate subalgebra generated
by the first $k$ variables. For $j, k \in [1, N]$ we will also use the notation $R_{[j,
					k]}$ to denote the unital subalgebra generated by ${x_i \mid j \leq i \leq k}$ where
$R_{[j, k]} = \bbK$ if $j \nleq k$.

We will write $\lambda_k$ for the $h_k$-eigenvalue of $x_k$, i.e., $h_k \cdot x_k =
	\lambda_k$. For $1 \leq j < k \leq N$, we have $\sigma_k (x_j) = h_k \cdot x_j =
	\lambda_{kj} x_j$ for some $\lambda_{kj} \in \bbK^\times$ using conditions
\labelcref{itm:x_i-eigenvectors,itm:sigma_k-is-h_k}. We can complete this to a
multiplicatively skew-symmetric matrix
\begin{equation}\label{eq:CGL_lambda}
	\boldsymbol{\lambda}= (\lambda_{kj}) \in M_N(\bbK^\times)
\end{equation}
%
by setting $\lambda_{kk} = 1$ and $\lambda_{jk} = \lambda_{kj}\inv$ for $1 \leq j < k
	\leq N$.

\begin{lemma}\label{lem:h_after_delta}
	With the notations as in \cref{def:cgl_extension},
	\begin{equation*}
		(h\cdot )\delta_k = \chi_{x_k}(h)\delta_k(h\cdot),
	\end{equation*}
	for all $h \in \mcH$ and $k \in [2, N]$.
\end{lemma}
\begin{proof}
	Fix $k \in [2, N]$ and $h \in \mcH$. Note that any monomial $a = x_1^{m_1}\cdots x_{k-1}^{m_{k-1}} \in R_{k-1}$ is an $h$-eigenvector, and also a $\sigma_k$-eigenvector. Hence,
	\begin{align*}
		h \cdot(x_k a)  & = \chi_{x_k}(h)\chi_{a}(h)x_ka                                      \\
		                & = \chi_{x_k}(h)\chi_{a}(h)(\sigma_k (a)x_k +  \delta_k(a))          \\
		                & = h \cdot (\sigma_k (a) x_k) + \chi_{x_k}(h)\delta_k(\chi_{a}(h)a), \\
		\shortintertext{but also}
		h \cdot (x_k a) & = h \cdot (\sigma_k (a) x_k + \delta_k(a))                          \\
		                & = h \cdot (\sigma_k (a) x_k) + h\cdot \delta_k(a),
	\end{align*}
	which shows $h \cdot \delta_k (a) = \chi_{x_k}(h) \delta_k (h \cdot a)$. The result then follows from linearity of $(h \cdot)$ and $\delta_k$.
\end{proof}

For a given CGL extension, there is not necessarily a unique order in which the $x_1,
	\dots, x_N$ need to be added. The different permutations will correspond to cluster
algebra mutations. A symmetry condition ensures that the CGL extension has enough
presentations.

\begin{definition}[\protect{\cite[Definition 3.12]{GoodearlYakimov2017QCA}	}]
	We call a CGL extension, $R$, \emph{symmetric}\index{CGL extension!symmetric} if the following conditions hold
	\begin{enumerate}
		\item For all $1\leq j < k \leq N$,
		      \begin{equation*}
			      \delta_k (x_j) \in R_{[j+1, k-1]}.
		      \end{equation*}
		\item For all $j \in [1, N]$, there exists $h^*_j \in \mcH$ such that
		      \begin{equation*}
			      h^*_j \cdot x_k = \lambda_{kj}\inv x_k = \lambda_{jk}x_k, \, \forall k \in [j+1, N]
		      \end{equation*}
		      and $h^*_j \cdot x_j = \lambda^*_j x_j$ for some $\lambda_j^*\in \bbK^\times$ which is not a root of unity.
	\end{enumerate}
\end{definition}
For any symmetric CGL extension, we can make new CGL presentations as follows. Set
\begin{equation*}
	\sigma_j^* = (h_j^* \cdot) \in \End(R),\, \forall j \in [1, N-1].
\end{equation*}
Then, define the $\sigma_j^*$-derivation, $\delta_j^*$, of $R_[j+1, N]$ via
\begin{equation*}
	\delta_j^*(x_k) = x_j x_k - \lambda_{jk}x_kx_j = -\lambda_{jk} \delta_k (x_j), \, \forall k \in [j+1, N].
\end{equation*}
%
The conditions for $R$ to be a symmetric CGL extension then imply that $\sigma_k$ and
$\delta_k$ preserve $R_{[j, k-1]}$ and $\sigma_k^*, \delta_k^*$ preserve $R_{[j+1, k]}$
for all $1 \leq j < k \leq N$. This allows us to view $R_{[j, k]}$ in two ways:
\begin{equation*}
	R_{[j, k]} = R_{[j, k-1]}[x_k; \sigma_k, \delta_k] \text{ and } R_{[j,k]} = R_{[j+1, k]}[x_j; \sigma_j^*, \delta_j^*].
\end{equation*}
So, we can always extend the interval $[j, k]$ to the left or the right. Doing this recursively gives rise to an iterated Ore extension presentation for $R$. For example, starting with the variable $x_N$ and always extending the interval to the left, we obtain the presentation
\begin{equation*}
	R = \bbK[x_N][x_{N-1}; \sigma_{N-1}^*, \delta_{N-1}^*]\cdots [x_1, \sigma_1^*, \delta_1^*].
\end{equation*}
%
The types of permutations that we obtain this way consist of the following subset of
the symmetric group $S_N$:
\begin{equation*}
	\Xi_N = \{\tau \in S_N \mid \tau(k) = \max (\tau ([1, k-1])) + 1 \text{ or } \tau(k) = \min (\tau ([1, k-1])) - 1, \forall k \in [2, N]\}.
\end{equation*}
%
Each $\tau \in \Xi_N$ gives rise to a CGL presentation:
\begin{equation*}
	R = \bbK[x_{\tau(1)}][x_{\tau(2)}; \sigma_{\tau(2)}'', \delta_{\tau(2)}''] \cdots [x_{\tau(N)}; \sigma_{\tau(N)}'', \delta_{\tau(N)}''],
\end{equation*}
%
where $\sigma''_{\tau(k)} = \sigma_{\tau(k)}, \delta_{\tau(k)}'' = \delta_{\tau(k)}$
and $h_{\tau(k)}' = h_{\tau(k)}$ if $\tau(k) = \max(\tau([1,k-1])) + 1$, while
$\sigma''_{\tau(k)} = \sigma^*_{\tau(k)}, \delta_{\tau(k)}'' = \delta^*_{\tau(k)}$ and
$h_{\tau(k)}'' = h_{\tau(k)}^*$ if $\tau(k) = \min(\tau([1,k-1])) - 1$
(\cite[Proposition 3.14]{GoodearlYakimov2017QCA}).

\textbf{Homogeneous prime elements.}

A \emph{prime element}\index{element!prime} of a not necessarily commutative domain $R$
is a nonzero element $p \in R$ such that $p$ is \emph{normal}\index{element!normal},
that is, $Rp = pR$ and such that the quotient $R / Rp$ is a domain. To illustrate that
this definition corresponds to our intuition of what a prime element should be, we
prove the following small lemma.
\begin{lemma}\label{lem:prime_divides_product}
	%
	Let $p$ be a prime element in a ring $R$. If $p$ divides a product $ab$ for some $a,b
		\in R$, then $p$ divides $a$ or $p$ divides $b$.
\end{lemma}
\begin{proof}
	%
	Note that since $p$ is normal, there is no ambiguity about dividing $ab$ on the left or
	on the right. Indeed, if $c p = ab$ for some $c \in R$, then $ab \in Rp = pR$, and
	there exists some $c' \in R$ such that $p c' = ab$. So, assume that $ab \in Rp$. Then
	the image of $ab$ is zero under the quotient map $\pi \colon R \to R/Rp$. Since $Rp$ is
	a domain, that implies that either $\pi(a) = 0$ or $\pi(b)$ is zero. So, either $a \in
		Rp$ or $b \in Rp$.
\end{proof}
%
We now state a theorem that is quite technical, but forms the heart of the main
theorem. Let us first fix some notation. For a function $\eta \colon [1, N] \to \bbZ$,
we can define a predecessor and successor
function\index{function!predecessor}\index{function!successor}:
\begin{align*}
	p \colon [1, N] \to [1, N] \sqcup \{-\infty\} & \colon k \mapsto  \max\{j < k \mid \eta(j) = \eta(k)\}  \\
	s \colon [1, N] \to [1, N] \sqcup \{+\infty\} & \colon k \mapsto  \min\{j > k \mid \eta(j) = \eta(k)\},
\end{align*}
%
where we take $\max \{\} = - \infty$ and $\min \{\}= + \infty$ (cf.
\cref{fig:predecessor_successor}).

\begin{figure}
	\centering
	\begin{tikzpicture}
		\draw[help lines, xstep =0] (0,0) grid (8,3);
		\draw plot[mark=*] coordinates {(1,1) (2,2) (3,1) (4,0) (5,1) (6,3) (7,2)};
		\node (neginf) at (-0.5,1) {$-\infty$};
		\node (a) at (1,1) {};
		\node (b) at (3,1) {};
		\node (c) at (5,1) {};
		\node (posinf) at (8.5, 1) {$+\infty$};
		\draw[Stealth-, red] (neginf) to [bend right = 20] (a);
		\draw[Stealth-Stealth, red] (a) to [bend right = 20] (b);
		\draw[Stealth-Stealth, red] (b) to [bend right = 20] (c);
		\draw[-Stealth, red] (c) to [bend right = 15] (posinf);
	\end{tikzpicture}
	\caption{The predecessor and successor functions move along the level sets (the horizontal lines) to the previous or the next point respectively.}
	\label{fig:predecessor_successor}
\end{figure}

\begin{theorem}[\protect{\cite[Theorem 3.6]{GoodearlYakimov2017QCA}}]\label{thm:homogeneous_primes}
	Let $R$ be a CGL extension of length $N$. There exists a function $\eta \colon [1, N] \to \bbZ$ and elements
	\begin{equation*}
		c_k \in R_{k-1} \text{ for all } k \in [2,N] \text{ with } p(k) \neq - \infty
	\end{equation*}
	such that the elements $y_1, \dots, y_N \in R$, recursively defined by
	\begin{equation*}
		y_k = \begin{cases}
			y_{p(k)}x_k - c_k & \text{ if } p(k) \neq -\infty \\
			x_k               & \text{ if } p(k) = -\infty,
		\end{cases}
	\end{equation*}
	%
	are homogeneous and have the property that for every $k \in [1, N]$,
	\begin{equation}\label{eq:list_of_ys_in_R_k}
		\{y_j \mid j \in [1, k], s(j) > k\}
	\end{equation}
	%
	is a list of the homogeneous prime elements of $R_k$, up to scalar multiples. The
	elements $y_1, \dots, y_N \in R$ with these properties are unique, and the function $p$
	has the property that $p(k) = - \infty$ if and only if $\delta_k = 0$.
\end{theorem}

To compute the elements $y_1, \dots, y_N$, some additional facts come in handy. For
this, we introduce some further notation and relations related to CGL extensions. In
what follows, $R$ is a CGL extension and the elements $y_k, k \in [1, N]$ and the
functions $p$ and $s$ are as in \cref{thm:homogeneous_primes}.

Let $O_{\pm} \colon [1, N] \to \bbZ_{\geq 0}$ be the order
functions\index{function!order} given by
\begin{align*}
	O_{+}(k) & = \max\{m \in \bbZ_{\geq 0} \mid s^m(k) \neq + \infty\}   \\
	O_{-}(k) & = \max\{m \in \bbZ_{\geq 0} \mid p^m(k) \neq - \infty\} ,
\end{align*}
%
where we take $p^0 = s^0 = \id$. Define
\begin{equation*}
	\overline{e}_k = \sum_{m=0}^{O_{-}(k)} e_{p^m(k)} \in \bbZ^N,
\end{equation*}
%
for $k \in [1, N]$. Then, for $j,k \in [1, N]$, set
\begin{equation*}
	\alpha_{kj} = \Omega_{\blambda}(e_k, \overline{e}_j) = \prod_{m=0}^{O_{-}(j)}\lambda_{k, p^m(j)} \in \bbK^\times
\end{equation*}
and
\begin{equation*}
	q_{kj} = \Omega_{\blambda}(\overline{e}_k, \overline{e}_j) = \prod_{m=0}^{O_{-}(k)}\prod_{l=0}^{O_{-}(j)}\lambda_{p^m(k),p^l(j)} = \prod_{m=0}^{O_{-}(k)}\alpha_{p^m (k),j} \in \bbK^\times,
\end{equation*}
%
where $\blambda$ is as defined in \cref{eq:CGL_lambda}. Write $\bmq = (q_{kj}) \in
	M_N(\bbK^\times)$.
\begin{proposition}[\protect{\cite[Proposition 3.11]{GoodearlYakimov2017QCA}}]
	The $y_k$ quasi-commute:
	\begin{equation}\label{eq:y_quasi_commute}
		y_k y_j = q_{kj}y_jy_k, \quad \forall j, k \in [1, N].
	\end{equation}
	%
	The quantum torus $\mcT_{\bmq}$ embeds in $\Fract(R)$ via the $\bbK$-algebra
	homomorphism $\varphi \colon \mcT_{\bmq} \injto \Fract(R)$ given by $\varphi(Y_i) =
		y_i,\,\forall i \in [1, N]$, and this embedding gives rise to inclusions
	\begin{equation*}
		\varphi(\mcA_{\bmq}) \subseteq R \subset \varphi(\mcT_{\bmq}) \subset \Fract(R).
	\end{equation*}
\end{proposition}

Additionally, we have the following equations.
\begin{align}\label{eq:y_x_quasi_commute}
	y_j x_k            & = \alpha_{kj}\inv x_k y_j, \text{ for all } j, k \in [1, N] \text{ such that } s(j) > k                                             \\
	\sigma_k (y_j)     & = \alpha_{kj}y_j, \text{ for } 1 \leq j \leq k \leq N \label{eq:sigma_of_y}                                                         \\
	\delta_k(y_{p(k)}) & = \alpha_{k, p(k)}(\lambda_k - 1)c_k, \text{ for all } k \in [2, N] \text{ such that } p(k) \neq - \infty \label{eq:delta_of_y_pk}.
\end{align}
%
Finally, the following proposition provides a semi-constructive way of computing the
$y_k$.
\begin{proposition}[\protect{\cite[Proposition 3.10]{GoodearlYakimov2017QCA}}]
	Assume that $y_1', \dots, y_N'$ and $c_1',\dots, c_N'$ are two sequences of elements of $R$ such that
	\begin{enumerate}
		\item $y_1', \dots, y_N'$ are homogeneous normal elements of $R_1, \dots, R_N$ respectively.
		\item $c'_k \in R_{k-1}, \forall k \in [1, N]$.
		\item For every $k \in [1, N]$, if $\delta_k = 0$ then $y'_k = x_k$ and otherwise there
		      exists $j \in [1, k-1]$ such that $y'_k = y'_j x_k - c'_k$.
	\end{enumerate}
	Then $y_1' = y_1, \dots, y_N' = y_N$.
\end{proposition}

\textbf{(Key parts of) proof of main theorem from \cite{GoodearlYakimov2017QCA}.}

To obtain a cluster algebra structure on a symmetric CGL extension, we need to study
how the homogeneous prime elements change when the variables $x_1, \dots, x_N$ are
adjoined in a different order. We consider the most basic case, when we swap the order
of two adjacent variables $x_k, x_{k+1}$. So, we have a CGL extension
\begin{equation}\label{eq:default_cgl_presentation}
	R = \bbK[x_1][x_2; \sigma_2, \delta_2]\cdots[x_k; \sigma_k, \delta_k][x_{k+1};\sigma_{k+1}, \delta_{k+1}]\cdots[x_N; \sigma_N, \delta_N],
\end{equation}
%
such that we can also write $R$ as a CGL extension of the form
\begin{multline}\label{eq:swapped_cgl_presentation}
	R = \bbK[x_1][x_2; \sigma_2, \delta_2]\cdots[x_{k-1}; \sigma_{k-1}, \delta_{k-1}][x_{k+1}; \sigma_k', \delta_k'][x_k;\sigma_{k+1}', \delta_{k+1}']\\
	[x_{k+2}; \sigma_{k+2}, \delta_{k+2}]\cdots[x_N; \sigma_N, \delta_N].
\end{multline}
%
We will denote the chain of algebras as
\begin{equation*}
	\bbK = R'_0 \subset R'_1  = \bbK[x_1] \subset R'_2 = \bbK[x_1][x_2; \sigma_2, \delta_2] \subset \cdots \subset R'_N = R
\end{equation*}
for the presentation \eqref{eq:swapped_cgl_presentation}.
We first look at what restrictions this places on the $\sigma_i, \sigma_i '$ and
$\delta_i,\delta_i'$ appearing in the CGL presentations.
\begin{lemma}\label{lem:swapped_cgl_sigma_delta}
	Let $R$ be a CGL extension with presentations of the form \eqref{eq:default_cgl_presentation} and \eqref{eq:swapped_cgl_presentation}. Then
	\begin{equation}\label{eq:sigma_prime}
		\begin{aligned}
			\sigma_k ' & = \sigma_{k+1}|_{R_{k-1}}    \\
			\sigma_k   & = \sigma_{k+1}' |_{R_{k-1}},
		\end{aligned}
	\end{equation}
	and
	\begin{equation}\label{eq:delta_prime}
		\begin{aligned}
			\delta_k ' & = \delta_{k+1}|_{R_{k-1}}    \\
			\delta_k   & = \delta_{k+1}' |_{R_{k-1}}.
		\end{aligned}
	\end{equation}
	Furthermore, $\delta_{k+1}(x_k) \in R_{k-1}$ and
	\begin{equation}\label{eq:sigma_delta_prime_x_k_1}
		\begin{aligned}
			\sigma_{k+1}'(x_{k+1}) & = \lambda_{k, k+1} x_{k+1}             \\
			\delta_{k+1}'(x_{k+1}) & = -\lambda_{k, k+1} \delta_{k+1}(x_k).
		\end{aligned}
	\end{equation}
	%
\end{lemma}
\begin{proof}
	%
	From \cref{eq:default_cgl_presentation} we have that $x_{k+1}a = \sigma_{k+1}(a)x_{k+1}
		+ \delta_{k+1}(a)$ for $a \in R_{k-1}$. On the other hand, also $x_{k+1}a =
		\sigma_k'(a)x_{k+1} + \delta_k'(a)$ using \cref{eq:swapped_cgl_presentation}. So
	\begin{equation*}
		\sigma_{k+1}(a)x_{k+1} + \delta_{k+1}(a) = \sigma_k'(a) x_{k+1} + \delta_k'(a).
	\end{equation*}
	%
	Using that $\sigma_k'(a)\in R_{k-1}, \sigma_{k+1}(a) \in R_k$ and $\delta_k'(a) \in
		R_{k-1}, \delta_{k+1}(a) \in R_{k}$ together with the fact that $x_{k+1}$ and 1 are
	linearly independent over $R_k$ it follows that $\sigma_k'(a) = \sigma_{k+1}(a)$ and
	$\delta_k'(a) = \delta_{k+1}(a)$. Applying the same reasoning, but swapping the roles
	of \cref{eq:default_cgl_presentation,eq:swapped_cgl_presentation} we obtain
	$\sigma_k(a) = \sigma_{k+1}'(a)$ and $\delta_k(a) = \delta_{k+1}'(a)$, and we have
	shown \cref{eq:delta_prime,eq:sigma_prime}.

	Recalling \cref{eq:CGL_lambda}, note that $x_k x_{k+1} = \lambda'_{k+1,k}x_{k+1}x_{k} +
		\delta'_{k+1}(x_{k+1})$, and $\lambda'_{k,k+1} = (\lambda_{k+1, k}')\inv$. So,
	\begin{equation*}
		\lambda'_{k,k+1}x_k x_{k+1} - \lambda'_{k,k+1} \delta'_{k+1}(x_{k+1}) = x_{k+1} x_k = \lambda_{k+1, k} x_k x_{k+1} + \delta_{k+1}(x_k).
	\end{equation*}
	%
	Then, since $\delta'_{k+1} \in R'_k $ and $\delta_{k+1}(x_k) \in R_k$ are linearly
	independent of $x_k x_{k+1}$ over $R_{k-1}$, we must have $\lambda_{k,k+1}' =
		\lambda_{k+1,k}$ and
	\begin{equation*}
		-\lambda'_{k,k+1}\delta'_{k+1}(x_{k+1}) = \delta_{k+1}(x_k) \in R'_k \cap R_k = R_{k-1}.
	\end{equation*}
	%
	Thus,
	\begin{align*}
		\sigma'_{k+1}(x_{k+1}) & = \lambda'_{k+1,k}x_{k+1} = \lambda_{k, k+1}x_{k+1}         \\
		\delta'_{k+1}(x_{k+1}) & = -(\lambda_{k,k+1}')\inv \delta_{k+1}(x_k) = - \lambda_{k,
			k+1}\delta_{k+1}(x_k),
	\end{align*}
	showing \cref{eq:sigma_delta_prime_x_k_1}.
\end{proof}

Using the previous lemma, we can now describe what happens to the homogeneous prime
elements $y_1, \dots, y_N$.

\begin{theorem}\label{thm:y_prime_swapped_cgl}
	Assume that $R$ is a CGL extension of the form \eqref{eq:default_cgl_presentation}, with a second CGL presentation of the form \eqref{eq:swapped_cgl_presentation}. Denote with $y_1, \dots, y_N$ the sequence of homogeneous prime elements from \cref{thm:homogeneous_primes}, and $\eta : [1, N] \to \bbZ$ the associated function for \eqref{eq:default_cgl_presentation}. For \eqref{eq:swapped_cgl_presentation} we write $y'_1, \dots, y'_N$ and $\eta'$.
	\begin{enumerate}[(a)]
		\item If $\eta(k) \neq \eta(k+1)$, then $y'_j = y_j$ for $j \neq k, k+1$ and $y'_k = y_{k+1},
			      y'_{k+1} = y_k$.

		\item \label{itm:eta_k_is_eta_k_plus_one} If $\eta(k) = \eta(k+1)$,
		      then
		      \begin{equation*}
			      y_k y'_k - \alpha_{k p(k)} y_{p(k)} y_{k+1}
		      \end{equation*}
		      is a homogeneous normal element of $R_{k-1}$, where we take $y_{-\infty} = 1 =
			      \alpha_{k, -\infty}$. From \cref{eq:y_x_quasi_commute} we know that $y_{p(k)}y_{k+1}
			      x_j = \gamma_j y_{p(k)}y_{k+1}$ for some $\gamma_j \in \bbK$ for each $j \in [1, k-1]$.
		      Then, also
		      \begin{equation*}
			      (y_ky'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1})x_j = \gamma_j x_j (y_ky'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1}).
		      \end{equation*}
		      Moreover,
		      \begin{equation*}
			      y'_j = \begin{dcases*}
				      \lambda_{k+1,k}y_j, & if $j=s^l(k+1)$ for some $l \in \bbZ_{\geq 0}$                               \\
				      y_j,                & if $j < k$, or $j>k+1$ and $j \neq s^l (k+1)$ for all $l \in \bbZ_{\geq 0}$.
			      \end{dcases*}
		      \end{equation*}
	\end{enumerate}
	In both cases, we can take $\eta' = \eta \circ (k,k+1)$, where $(k, k+1)$ denotes a transposition in $S_N$.
\end{theorem}
\begin{proof}
	%
	Since $R'_j = R_j$ for $j\neq k, k+1$ we also have that $y'_j = y_j$ for $j\in [1,
			k-1]$ since they only depend recursively on the ones before. We can hence also choose
	$\eta'(j) = \eta(j)$ for all $j\in [1, k-1]$. As we already remarked in the previous
	lemma, $R'_k \cap R_k = R_{k-1}$, and hence $y'_k$ which lies in $R'_k$ but not in
	$R_{k-1}$ is not contained in $R_k$.

	If $\eta(k) \neq \eta(k+1)$, then $s(k) > k+1$, and hence $y_k$ is a homogeneous prime
	element of $R_{k+1}$ due to \cref{eq:list_of_ys_in_R_k}. So, $R_{k+1}$ has two
	homogeneous prime elements up to taking scalar multiples, $y_k$ and $y_{k+1}$, which do
	not belong to $R_{k-1}$. Since $R_{k-1}' = R_{k-1}$ and $R_{k+1}' = R_{k+1}$, it
	follows that $\eta'(k) \neq \eta'(k+1)$. Indeed, $s'(k) = k+1$ would mean that $y'_k$
	is not a homogeneous prime element of $R'_{k+1}$, and $R'_{k+1}$ would only have one
	homogeneous prime element up to taking associates which doesn't belong to $R_{k-1}$.
	Now, by the uniqueness up to taking associates of the homogeneous prime elements and
	the fact that $y'_k \notin R_k$, we have that $y'_k = \xi_{k+1}y_{k+1}$ and $y'_{k+1} =
		\xi_{k}y_k$ for some $\xi_k, \xi_{k+1} \in \bbK^\times$. Since $y_j' = y_j$ for $j \in
		[1, k-1]$, \cref{thm:homogeneous_primes} gives that $\xi_{k} = 1 \xi_{k+1}$, and that
	we may choose $\eta'(k) = \eta(k+1)$ and $\eta'(k+1) = \eta(k)$. Additionally, since
	$R'_j = R_j$ for $j \in [k+1, N]$, we have $y'_j = \xi_j y_j$ for some $\xi_j \in
		\bbK^\times$. Applying \cref{thm:homogeneous_primes} and looking at the leading
	coefficients, we find that $\xi_j = 1$ and that we may choose $\eta'(j) = \eta(j)$ for
	all $j \in [k+1, N]$. \medskip

	If $\eta(k) = \eta(k+1)$, then $s(k) = k+1$ so that $y_k$ is not a homogeneous prime
	element of $R_{k+1}$. So, $y_{k+1}$ is the only homogeneous prime element, up to taking
	associates, in $R_{k+1}\setminus R_{k-1}$. Since $R'_{k+1} = R_{k+1}$ and $R'_{k-1} =
		R_{k-1}$ we must have that $y'_{k+1}$ is a scalar multiple of $y_{k+1}$, and that
	$\eta'(k) = \eta'(k+1)$. Because $\eta'(k) = \eta'(p(k)) = \eta(p(k))$ if $p(k) \neq
		-\infty$, we may choose $\eta'(k) = \eta'(k+1) = \eta(k+1) = \eta(k)$. Using this
	information, \cref{thm:homogeneous_primes} gives
	\begin{equation}\label{eq:recursive_yk_y_k_prime}
		\begin{alignedat}{2}
			y_k &= \begin{dcases*}
				\mathrlap{y_{p(k)}x_k - c_k,}\hphantom{y_{p(k)}x_{k+1}-c'_k,} & if $p(k) \neq -\infty$ \\
				x_k,                                                          & if $p(k) = -\infty$
			\end{dcases*}
			&
			y_{k+1} &= y_k x_{k+1} - c_{k+1}\\
			y'_k    & = \begin{dcases*}
				y_{p(k)}x_{k+1} - c'_k, & if $p(k) \neq -\infty$ \\
				x_{k+1},                & if $p(k) = -\infty$
			\end{dcases*}
			\qquad
			&
			y_{k+1} & = y'_k x_k - c'_{k+1}
		\end{alignedat}
	\end{equation}
	%
	for some $c_k,c'_k \in R_{k-1}, c_{k+1} \in R_k$ and $c'_{k+1} \in R'_{k}$. Now,
	\begin{align*}
		y_{k+1}  & = y_k x_{k+1} - c_{k+1} = y_{p(k)} x_k x_{k+1} - c_{k+1} - c_k x_{k+1} ,                                                        \\
		\shortintertext{and}
		y'_{k+1} & = y'_k x_k - c'_{k+1} = y_{p(k)}x_{k+1}x_k - c'_{k+1} - c'_k x_k = \lambda_{k+1, k}y_{p(k)}x_k x_{k+1} - c'_{k+1} - c'_{k} x_k,
	\end{align*}
	%
	where we use the convention that $y_{p(k)} = 1$ and $c'_k = c_k = 0$ if $p(k) =
		-\infty$. Since $y'_{k+1}$ is a scalar multiple of $y_{k+1}$, we must have
	\begin{equation*}
		y'_{k+1} = \lambda_{k+1,k}y_{k+1}.
	\end{equation*}
	%
	Using again that $R'_j = R_j$ for $j \in [k+1, N]$, together with
	\cref{thm:homogeneous_primes} we find $\eta'(j) = \eta(j)$ for $j\in [k+1, N]$ and
	$y'_j = \lambda_{k+1,k} y_j$ if $j = s^l(k+1)$ for some $l \in \bbZ_{\geq 0}$ while
	$y'_j = y_j$ otherwise.

	We now verify that
	\begin{equation*}
		y_k y'_k - \alpha_{k p(k)}y_{p(k)}y_{k+1} \in R_{k-1}.
	\end{equation*}
	%
	If $p(k) = -\infty$, then $y_k = x_k$ and
	\begin{equation*}
		c_{k+1} \overset{\eqref{eq:delta_of_y_pk}}{=} \alpha_{k+1, p(k+1)}\inv (\lambda_{k+1} - 1)\inv\delta_{k+1}(y_{p(k+1)})
		= \alpha_{k+1, k}\inv (\lambda_{k+1} -1)\inv \delta_{k+1}(x_k) \in R_{k-1},
	\end{equation*}
	%
	as $\delta_{k+1}(x_k) \in R_{k-1}$ by \cref{lem:swapped_cgl_sigma_delta}. By
	convention, $y_{-\infty} = 1 = \alpha_{k, -\infty}$. Hence,
	\begin{equation}\label{eq:y_k_y_k_prime_when_pk_inf}
		y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1} = y_k y'_k - y_{k+1} =  x_k x_{k+1} - (x_k x_{k+1} - c_{k+1}) = c_{k+1} \in R_{k-1},
	\end{equation}
	as desired, and we also immediately obtain that it is homogeneous, as $c_{k+1} = y_k x_{k+1} -y_{k+1}$ is homogeneous.

	Now, let us tackle the case where $p(k) \neq -\infty$. We have
	\begin{align*}
		y_k y_{p(k)}  \overset{\eqref{eq:recursive_yk_y_k_prime}} & {=} (y_{p(k)}x_k - c_k)y_{p(k)}                       \\
		\overset{\eqref{eq:y_x_quasi_commute}}                    & {=} y_{p(k)}\sigma_k(y_{p(k)}) x_k - c_k y_{p(k)}     \\
		\overset{\eqref{eq:sigma_of_y}}                           & {=} \alpha_{kp(k)} y_{p(k)}y_{p(k)}x_k - c_k y_{p(k)} \\
		\overset{\eqref{eq:y_quasi_commute}}                      & {=} \alpha_{kp(k)}y_{p(k)}y_k,
	\end{align*}
	and hence
	\begin{align*}
		y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1} & = y_k (y_{p(k)}x_{k+1}-c'_k) -\alpha_{kp(k)}y_{p(k)}(y_kx_{k+1}-c_{k+1}) \\
		                                         & = -y_k c'_k + \alpha_{kp(k)}y_{p(k)}c_{k+1} \in R_k.
	\end{align*}
	%
	On the other hand,
	\begin{align*}
		\sigma'_{k+1}(y'_k)                          & = \sigma'_{k+1}(y_{p(k)}x_{x+1} - c'_k)                                \\
		\overset{\eqref{eq:sigma_delta_prime_x_k_1}} & {=} \alpha_{kp(k)}\lambda_{k,k+1}y_{p(k)}x_{k+1} - \sigma_{k+1}'(c'_k) \\
		\overset{\eqref{eq:sigma_of_y}}              & {=} \alpha_{kp(k)}\lambda_{k+1,k}\inv y'_k,
	\end{align*}
	from which we obtain
	\begin{align*}
		y_k y_k' - \alpha_{kp(k)}y_{p(k)}y_{k+1} & = (y_{p(k)}x_k -c_k)y'_k -\alpha_{kp(k)}y_{p(k)}\lambda_{k+1,k}\inv y_{p(k)} y'_{k+1}                                                       \\
		                                         & = y_{p(k)}(\sigma'_{k+1}(y'_k)x_k + \delta'_{k+1}(y'_k)) -c_k y'_k -\alpha_{kp(k)}y_{p(k)}\lambda_{k+1,k}\inv y_{p(k)}(y'_k x_{k}-c'_{k+1}) \\
		                                         & = y_{p(k)}\delta'_{k+1}(y'_k) -c_k y'_k -\alpha_{kp(k)}y_{p(k)}\lambda_{k+1,k}\inv y_{p(k)}c'_{k+1} \in R'_k.
	\end{align*}
	%
	So, $y_k y_k'- \alpha_{kp(k)}y_{p(k)}y_{k+1} \in R_k \cap R_k' = R_{k-1}$, which is
	what we wanted to show. Let us now show that it is also homogeneous in this case.

	By \cref{eq:delta_of_y_pk}, $c'_k$ and $c_{k+1}$ are scalar multiples of $\delta'_k
		(y_{p(k)}) = \delta_{k+1}(y_{p(k)})$ and $\delta_{k+1}(y_k)$ respectively. So, by
	\cref{lem:h_after_delta}, we have that
	\begin{align*}
		h \cdot (y_k c'_k)        & = \chi_{y_k}(h)y_k h \cdot (\xi \delta_{k+1}(y_{p(k)}))                              \\
		                          & = \chi_{y_k}(h)y_k \chi_{x_{k+1}}(h) \chi_{y_{p(k)}}(h)\xi \delta_{k+1}(y_{p(k)})    \\
		                          & = \chi_{y_k}(h)\chi_{x_{k+1}}(h)\chi_{y_{p(k)}}(h) y_k c'_k                          \\
		\shortintertext{and}
		h \cdot (y_{p(k)}c_{k+1}) & = \chi_{y_{p(k)}}(h) y_{p(k)} h \cdot (\xi' \delta_{k+1}(y_k))                       \\
		                          & = \chi_{y_{p(k)}}(h)y_{p(k)}  \chi_{x_{k+1}}(h) \chi_{y_k}(h) \xi' \delta_{k+1}(y_k) \\
		                          & = \chi_{y_{p(k)}}(h)  \chi_{x_{k+1}}(h) \chi_{y_k}(h) y_{p(k)}c_{k+1},
	\end{align*}
	%
	for all $h \in \mcH$. Hence, $-y_k c'_k + \alpha_{kp(k)}y_{p(k)}c_{k+1} = y_k y'_k -
		\alpha_{kp(k)}y_{p(k)}y_{k+1}$ is homogeneous.

	It remains to show that it is normal in $R_{k-1}$. By \cref{eq:y_x_quasi_commute}, we
	get that
	\begin{equation*}
		(y_k y_k')x_j = \beta_j x_j (y_k y'_k),
	\end{equation*}
	and
	\begin{equation*}
		(y_{p(k)}y_{k+1})x_j = \gamma_j x_j (y_{p(k)}y_{k+1}),
	\end{equation*}
	for all $j \in [1, k-1]$, where
	\begin{align*}
		\beta_j & = (\alpha'_{jk})\inv \alpha_{jk} \inv                                                                                   \\
		        & = \left(\prod_{m = 0}^{O_{-}(k)}\lambda_{j,p^m (k)} \prod_{l=0}^{O_{-}(k)}\lambda'_{j,p^l(k)}\right)\inv                \\
		        & = \left(\lambda_{j, k+1}\prod_{m = 0}^{O_{-}(k)}\lambda_{j,p^m (k)} \prod_{l=1}^{O_{-}(k)}\lambda_{j,p^l(k)}\right)\inv \\
		        & = \left(\prod_{m = 0}^{O_{-}(k+1)}\lambda_{j,p^m (k)} \prod_{l=0}^{O_{-}(p(k))}\lambda_{j,p^l(p(k))}\right)\inv         \\
		        & = (\alpha_{j,k+1} \alpha_{j, p(k)})\inv                                                                                 \\
		        & = \gamma_j.
	\end{align*}
	This completes the proof.
\end{proof}

Although \cref{thm:y_prime_swapped_cgl}~\ref*{itm:eta_k_is_eta_k_plus_one} does not
give an explicit formula for $y'_k$ in terms of $y_k$, we can make it more explicit, by
using the following fact.
\begin{theorem}[\protect{\cite[Proposition 3.1]{GoodearlYakimov2017QCA}}]\label{thm:normal_in_UFD}
	%
	Let $R$ be a CGL extension\footnote{The statement holds more generally for Noetherian
		$\mcH$-UFD's, but we only need this specific case.}. Every normal $\mcH$-eigenvector in
	$R$ is either a unit or a product of prime $\mcH$-eigenvectors. The factors are unique
	up to reordering and taking associates.
\end{theorem}
Let us write
\begin{equation}\label{eq:P_of_k}
	P(k) = \{j \in [1,  k] \mid s(j) > k\}.
\end{equation}
%
Then in the context of \cref{thm:homogeneous_primes}, the homogeneous primes of $R_k$
are given by $\{y_j \mid j \in P(k)\}$.
\begin{theorem}
	%
	With the same assumptions as
	\cref{thm:y_prime_swapped_cgl}~\ref*{itm:eta_k_is_eta_k_plus_one}, there exist a
	collection of nonnegative integers $\{m_i \mid i \in P(k-1), i\neq p(k)\}$ and $\kappa
		\in \bbK^\times$ such that
	\begin{equation*}
		y'_k = y_k\inv \left(\alpha_{kp(k)}y_{p(k)}y_{k+1} + \kappa \prod_{i \in P(k-1), i\neq p(k)} y_i^{m_i}\right).
	\end{equation*}
\end{theorem}
\begin{proof}
	Since $y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1}$ is a homogeneous normal element of $R_{k-1}$, it follows from \cref{thm:normal_in_UFD} that
	\begin{equation*}
		y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1} = \kappa \prod_{i \in P(k-1)} y_i^{m_i}
	\end{equation*}
	%
	for some $\kappa \in \bbK$ and a collection of nonnegative integers $\{m_i \mid i \in
		P(k-1)\}$, as the set $\{y_i \mid i \in P(k-1)\}$ contains all homogeneous prime
	elements of $R_{k-1}$ up to associates by \cref{thm:homogeneous_primes}. If $p(k) =
		-\infty$, then \cref{eq:y_k_y_k_prime_when_pk_inf} gives that the $\kappa$ can not be
	zero as $c_{k+1} \neq 0$. In this case, also $i \neq p(k)$ for all $i \in P(k-1)$.
	Thus, it remains to show that $\kappa \neq 0$ and $m_{p(k)} = 0$ if $p(k) \neq -
		\infty$.

	If $\kappa = 0$, then $y_k y'_k = \alpha_{kp(k)}y_{p(k)}y_{k+1}$, which is a
	contradiction, as $y_{k+1}$ is a prime element of $R_{k+1}$ which does not divide
	either $y_k$ or $y'_k$ (cf. \cref{lem:prime_divides_product}).

	If $m_{p(k)} \neq 0$ and $p(k) \neq -\infty$, then $y_{p(k)}$ is a prime element of
	$R_{k-1}$ since $s(p(k)) = k > k-1$, and
	\begin{equation*}
		y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1} \in y_{p(k)}R_{k-1},
	\end{equation*}
	which implies
	\begin{equation*}
		y_k y'_k \in y_{p(k)}R_{k+1}.
	\end{equation*}
	%
	From \cref{thm:homogeneous_primes} we know that we can write $y_k = y_{p(k)}x_k - c_k$
	and $y'_k = y_{p(k)}x_{k+1} - c'_k$ for some $c_k, c'_k \in R_{k-1}$. Then $y_{p(k)}$
	does not divide $c_k$, as otherwise $y_{p(k)}$ would divide $y_k$, and they would be
	associates by \cref{thm:normal_in_UFD}. Similarly, $y_{p(k)}$ does not divide $c'_k$.
	Hence,
	\begin{align*}
		c_kc'_k & = c_k (y'_k - y_{p(k)}x_{k+1})                         \\
		        & = y_ky'_k - y_{p(k)}x_ky'_k + c_k y_{p(k)}x_{k+1}      \\
		        & \in (y_{p(k)} R_{k+1}) \cap R_{k-1} = y_{p(k)}R_{k-1},
	\end{align*}
	%
	as $c_kc'_k \in R_{k-1}$ and $c_k y_{p(k)} \in R_{k-1}y_{p(k)} = y_{p(k)}R_{k-1}
		\subseteq y_{p(k)}R_{k+1}$ by normality of $y_{p(k)}$ in $R_{k-1}$. So, $y_{p(k)}$
	divides either $c_k$ or $c'_k$ in $R_{k-1}$, a contradiction.
\end{proof}

\textbf{TODO: Finish the rest of Chapter 4 from GY.}

We now prove some results which will be crucial in proving equality between the upper
cluster algebra and the cluster algebra. Since the upper cluster algebra consists of
intersections of localizations, it makes sense to look at what happens to the
intersection of the localizations by the two sequences of prime elements in the setting
of \cref{thm:y_prime_swapped_cgl}~\ref*{itm:eta_k_is_eta_k_plus_one}.

To localize in the noncommutative setting, we need the notion of an \emph{Ore
	set}\index{Ore set}. The idea is that we want to define a new ring $R[E\inv] = \{re\inv
	\mid e \in E, r\in R\}$ for some subset $E \subseteq R$ of a (noncommutative) domain
$R$. In order for this to make sense, $E$ should be a \emph{multiplicative
	subset}\index{multiplicative subset}, i.e., $1 \in E$ and $ef \in E$ for all $e,f \in
	E$. This alone is not enough. Additionally, if $e, f \in E$, then for any $x, y \in R$
we should have $xe\inv yf\inv \in R[E\inv]$. This would be satisfied if we could write
$e\inv y = y' (e')\inv$ for some $y' \in R$ and $e' \in E$. That condition is
equivalent to $y e' = e y'$ for some $y' \in R$ and $e' \in E$, which in turn is
equivalent to $y E \cap e R \neq \emptyset$ for all $y \in R$ and $e \in E$. Putting
this together, we find the definition. A \emph{right Ore set} $E \subseteq R$ is a
multiplicative subset such that $x E \cap e R \neq \emptyset$ for all $x \in R$ and $e
	\in E$. One defines a left Ore set analogously.

Recall that a \emph{regular element}\index{element!regular} of a ring is a nonzero
element that is neither a left nor a right zero-divisor.
\begin{lemma}\label{lem:ore_set_ore_extension}
	%
	Let $B[x;\sigma,\delta]$ be an Ore extension and $E$ a (left or right) Ore set of
	regular elements in $B$. If $\sigma(\bbK^\times E) = \bbK^\times E$, then $E$ is a
	(left or right) Ore set of regular elements in $B[x;\sigma, \delta]$.
\end{lemma}
\begin{proof}
	%
	That the elements remain regular follows from $x b = 0 \iff b x = 0 \iff b = 0$ for all
	$b \in B$.

	Take $e \in E$. We only prove the case where $E$ is a right Ore set, as the case for a
	left Ore set is completely analogous. We first show that there exist $e' \in E$ and $r
		\in R = B[x; \sigma, \delta]$ such that $er = x e'$. Because $E$ is a right Ore set of
	$B$, there exist $f\in E$ and $b \in B$ such that
	\begin{equation*}
		e b = \delta(\sigma\inv(e))f.
	\end{equation*}
	Because $\sigma\inv(e) \in \bbK^\times E$ by assumption, there exists some $\xi \in \bbK^\times$ such that $\xi \sigma\inv(e) \in E$.
	Define
	\begin{equation*}
		e' = \xi \sigma\inv(e)f \in E.
	\end{equation*}
	Then
	\begin{align*}
		xe' & = x\xi\sigma\inv(e)f                                     \\
		    & = \xi (\sigma(\sigma\inv(e)f)x + \delta(\sigma\inv(e)f)) \\
		    & = \xi(e\sigma(f)x + e \delta(f) + e b)                   \\
		    & = e(\xi (\sigma(f)x + \delta(f) + b)) \in eR.
	\end{align*}

	Now, assume that $r,s \in R$ are such that $e R \cap r E \neq \emptyset$ and $e R \cap
		s E \neq \emptyset$ for all $e \in E$. Then, also $e R \cap rs E \neq \emptyset$ for
	all $e\in E$. Indeed, for $e \in E$ we can find $a \in R$ and $f \in E$ such that $ea =
		r f$, and $b \in R$ and $g \in E$ such that $f b = s g$, and then
	\begin{equation*}
		e a b = r f b = r s g \in rs E \cap e R.
	\end{equation*}

	The statement now follows by iteratively applying this fact on an element $\sum b_i x^i
		\in R$.
\end{proof}

We now apply this lemma to a CGL extension $R$. Let $y_1, \dots, y_N$ be the sequence
of homogeneous prime elements from \cref{thm:homogeneous_primes}. We now claim that for
each $j \in [1, K]$, the set, $E_j = \bbK^\times\{y_j^{m} \mid m \in \bbZ_{\geq 0}\}$,
is an Ore set in $R$. Indeed, first note that for any $m \in \bbZ_{\geq 0}$ and $a \in
	R_j$, we have
\begin{equation*}
	y_j^k R_j \cap a E_j = R_j y_j^k \cap  a E_j \ni a y_j^k.
\end{equation*}
%
This shows that $E_j$ is an Ore set in $R_j$. Furthermore, $\sigma(\bbK^\times E_j) =
	\bbK^\times E_j$ because $y_j$ is homogeneous. Hence, by
\cref{lem:ore_set_ore_extension}, we find that $E_j$ is also an Ore set in $R_{j + 1}$.
By repeatedly applying \cref{lem:ore_set_ore_extension} we find that $E_j$ is an Ore
set in $R$. Now, take $I \subseteq [1, N]$ and define
\begin{equation*}
	E_I = \bbK^\times \prod_{j \in I}\{y_j^m \mid m \in \bbZ_{\geq 0}\}.
\end{equation*}
%
By \cref{eq:y_quasi_commute}, it is a multiplicative set. It is also an Ore set by a
similar argument as in the proof of \cref{lem:ore_set_ore_extension}. Indeed, if $e \in
	E$ and $f \in F$ for two Ore sets $E$ and $F$, then for every $x \in R$ the set $ef R
	\cap x E F$ is non-empty. Using that $E$ and $F$ are Ore sets, take $y, z \in R, e' \in
	E$ and $f' \in F$ such that $ey = xe'$ and $fz = yf'$. Then $xe'f' = eyf' = efz \in efR
	\cap xEF$.

We will use the shorthand $E = E_{[1,N]}$. Write $a \mid_l b$ if $a$ divides $b$ on the
left, i.e., $b = ar$ for some $r \in R$. Call an element $y_1^{m_1}\cdots y_N^{m_N}$ a
\emph{minimal denominator}\index{minimal denominator} of a nonzero element $v\in
	R[E\inv]$ if
\begin{equation*}
	v = y_1^{-m_1}\cdots y_N^{-m_N} s
\end{equation*}
%
for some $s \in R$ such that $y_j \nmid_l s$ for all $j\in [1,N]$ with $m_j > 0$.
Intuitively, this means that we can not cancel any terms.

In what follows, we assume the setting of
\cref{thm:y_prime_swapped_cgl}~\ref*{itm:eta_k_is_eta_k_plus_one}. We then define for
all $I \subseteq [1, N]$ the analogous Ore sets,
\begin{equation*}
	E'_{I} := \bbK^\times \prod_{j \in I}\{(y'_j)^m \mid m \in \bbZ_{\geq 0}\};
\end{equation*}
%
and write $E' = E'_{[1, N]}$. Because $y'_j$ is a scalar multiple of $y_j$ for all $j
	\neq k$, we have that $E'_I = E_I$ if $k \notin I'$. We now state the theorem that we
want to prove.

\begin{theorem}\label{thm:minimal_denominators}
	Assume the setting of \cref{thm:y_prime_swapped_cgl}~\ref*{itm:eta_k_is_eta_k_plus_one}. Let
	\begin{equation*}
		y_1^{m_1}\cdots y_N^{m_N} \quad \text{and} \quad y_1^{m'_1} \cdots y_{k-1}^{m'_{k-1}}(y'_k)^{m'_k}y_{k+1}^{m'_{k+1}} \cdots y_N^{m'_N}
	\end{equation*}
	%
	be two minimal denominators of a nonzero element $v \in R[E\inv] \cap R[(E')\inv]$
	(with respect to both $R[E\inv]$ and $R[(E')\inv]$). Then
	\begin{equation*}
		m_k = m'_k = 0 \quad \text{and} \quad m_j = m'_j,\quad \forall j \in [1, N], j \neq k.
	\end{equation*}
	In particular,
	\begin{equation*}
		R[(E_I)\inv] \cap R[(E'_{I'})\inv] = R[(E_I \cap E'_{I'})\inv] = R[(E_{(I \cap I')\setminus \{k\}})\inv]
	\end{equation*}
	for all $I,I' \subseteq [1, N]$.
\end{theorem}

Note that since $E_I \cap E'_{I'} \subseteq E_I, E'_{I'}$ we always have
\begin{equation*}
	R[(E_I)\inv] \cap R[(E'_{I'})\inv] \supseteq R[(E_I \cap E'_{I'})\inv].
\end{equation*}
%
The other inclusion follows from the first part of the theorem. The last equality of
the theorem follows from the following lemma.
\begin{lemma}
	For all $I, I' \subseteq [1, N]$,
	\begin{equation*}
		E_I \cap E'_I = E_{(I \cap I')\setminus \{k\}} = E'_{(I \cap I') \setminus \{k\}}.
	\end{equation*}
\end{lemma}
\begin{proof}
	%
	The inclusions $E_{(I \cap I')\setminus \{k\}}, E'_{(I \cap I') \setminus \{k\}}
		\subseteq E_I \cap E'_{I'}$ are immediate. Take $e \in E_I \cap E'_{I'}$, and write
	\begin{equation*}
		e = \beta \prod_{j=1}^N y_j^{m_j} = \beta' \prod_{j=1}^N (y'_j)^{m'_j}
	\end{equation*}
	%
	for some $\beta, \beta' \in \bbK^\times$ and $m_j, m'_j\in \bbZ_{\geq 0}$ such that
	$m_j = 0$ for $j \notin I$ and $m'_j = 0$ for $j \notin I'$. It now remains to show
	\begin{equation*}
		m_k = m'_k = 0 \quad \text{and}\quad m_j = m'_j, \quad \forall j \in [1, N], j\neq k.
	\end{equation*}
	%

	By \cref{thm:normal_in_UFD} we must have $m_N = m'_N$, as $y_N$ and $y'_N$ are prime
	elements and associates in $R$, but do not divide $y_1, \dots, y_{N-1}$. So, we may
	assume that $m_N = m'_N = 0$, by replacing $e$ with $e y_N^{-m_N}$ and multiplying
	$\beta'$ by an appropriate scalar. Applying this reduction repeatedly, we reduce to the
	case where $m_j = m'_j = 0$ for all $j \in [k+1, N]$.

	We must now get rid of the ``obstacles'', $y_k$ and $y'_k$. Write, using
	\cref{thm:y_prime_swapped_cgl},
	\begin{equation*}
		y_k y'_k - \alpha_{kp(k)}y_{p(k)}y_{k+1} = u \in R_{k-1}.
	\end{equation*}
	%
	Assume that $m_k > 0$. Then,
	\begin{equation*}
		e y_k' = \beta \left(\prod_{j \in [1, k-1]}y_j^{m_j}y_k^{m_k-1}\right)(u+\alpha_{kp(k)}y_{p(k)}y_{k+1}).
	\end{equation*}
	%
	In this expression, only $y_{k+1} \in R_{k+1}$, and it follows that $ey'_k$ has degree
	1 with respect to $x_{k+1}$. On the other hand, we can also write
	\begin{equation*}
		ey'_k = \beta'\left(\prod_{j \in [1, k-1]}(y'_j)^{m'_j}\right)(y'_k)^{m'_k + 1},
	\end{equation*}
	where $ey'_k$ has degree $m'_k + 1$ with respect to $x_{k+1}$. So, we must have $m'_k = 0$ and consequently
	\begin{equation*}
		e = \beta' \prod_{j\in [1, k-1]}(y'_j)^{m'_j} \in R_{k-1}.
	\end{equation*}
	This contradicts the assumption that $m_k > 0$. Hence, $m_k = 0$ and by symmetry $m'_k = 0$. We can then continue as above to conclude that also $m_j = m'_j$ for all $j \in [1, k-1]$, which is what we needed to show.
\end{proof}

We now state and prove 3 lemmas that we will need for the proof of
\cref{thm:minimal_denominators}.

\begin{lemma}
	%
	Let $R$ be a $\bbK$-algebra that is a domain and $E$ a left or right Ore set in $R$.
	Let $p \in R$ be a prime element that is normal in $\bbK^\times E$ and such that $Rp
		\cap E = \emptyset$. Then $p$ is a prime element of $R[E\inv]$. Furthermore, if $s \in
		R$ and $p \nmid s$ as elements of $R$, then $p \nmid s$ as elements of $R[E\inv]$.
\end{lemma}
\begin{proof}
	%
	Take $e \in E$. By normality of $p$ in $\bbK^\times E$, we can write $pe = \alpha f p$
	and $ep = p \beta g$ for some $\alpha, \beta \in \bbK^\times$ and $f,g \in E$. Then $p
		e \inv = \alpha\inv f\inv p$ and $e\inv p = p \beta\inv g \inv$. Since $p$ is prime it
	is also normal in $R$, and we obtain that $p$ is normal in $R[E\inv]$.

	\textbf{TODO: rest of proof}.
\end{proof}

% \section{Some definitions}

% We start with the non-quantized version of cluster algebras, introduced in
% \cite{FominZelevinsky2002CAF}. We won't take the most general definition, since that
% doesn't carry over as nicely to the quantized version.

% \subsection{Notation}

% Some of the notation that we will use throughout this paper. Let $[a,b] = \{a, a+1,
% 	\dots, b\}$ for integers $a,b \in \bbZ$, where $[a,b] = \emptyset$ if $a > b$. Fix an
% integer $N$, and a subset $\ex \subseteq [1, N]$ of size $n$. The elements of $\ex$
% will be called the \emph{exchangeable} indices. Let $\mcF = \bbQ(Y_1, \dots, Y_N)$, be
% the field of rational functions over $\bbQ$. Boldface letters will be used to denote
% vectors, matrices, or clusters.

% \subsection{Classical cluster algebras}

% Before giving the definition of a cluster algebra, we need to define what seeds and
% seed mutations are.
% \begin{definition}[\cite{BerensteinZelevinsky2005QCA}]
% 	A \emph{seed} is a pair $(\tilde{\mathbf{x}}, \tilde{B})$ such that
% 	\begin{enumerate}
% 		\item $\tilde{\mathbf{x}}$ is a \emph{free generating set} of $\mcF$.
% 		      So, $\tilde{\mathbf{x}}$ is a set of $N$ elements $x_1, \dots, x_n \in \mcF$ that are algebraically independent, and generate $\mcF$.
% 		\item $\tilde{B}$ is an $N \times n$ matrix over $\bbZ$ with columns labeled by the exchangeable
% 		      indices $\ex$. Let $B$ be the $n \times n$ submatrix
% 		      of $\tilde{B}$ consisting of all the rows with index in $\ex$.
% 		      We call $B$ the \emph{principal part} of $\tilde{B}$, and require that it is \emph{skew-symmetrizable}.
% 		      This means that there exists a diagonal matrix $D$ with positive entries
% 		      such that $D\inv B D = - B^T$ i.e., $BD$ is skew-symmetric.
% 	\end{enumerate}
% \end{definition}

% Looking only at the exchangeable indices, we get the \emph{cluster} $\mathbf{x} = \{x_i
% 	\mid i \in \ex \} \subseteq \tilde{\mathbf{x}}$.
% \begin{definition}
% 	Let $(\tilde{\mathbf{x}}, \tilde{B})$ be a seed.
% 	The \emph{seed mutation} in direction $k \in \ex$
% 	produces a new seed $\mu_k(\tilde{\mathbf{x}}, \tB) = (\tilde{\bx}', \tB')$, where:
% 	\begin{itemize}
% 		\item $\tbx' = (\tbx \setminus \{x_k\}) \cup \{x_k'\}$,
% 		      with $x_k' \in \mcF$ determined by the \emph{exchange relation}:
% 		      \begin{equation}
% 			      \label{eq:exchange_relation}
% 			      x_kx_k' = \prod_{\substack{i \in [1,N] \\ b_{ik} > 0}}x_i^{b_{ik}} + \prod_{\substack{i \in [1, N] \\ b_{ik} < 0}}x_i^{-b_{ik}}.
% 		      \end{equation}
% 		\item $\tB'$ is given by the formula:
% 		      \begin{equation}
% 			      \label{eq:matrix_mutation}
% 			      b'_{ij} =
% 			      \begin{cases}
% 				      -b_{ij}                                            & \text{ if } i=k \text{ or } j=k \\
% 				      b_{ij} + \frac{|b_{ik}|b_{kj} + b_{ik}|b_{kj}|}{2} & \text{ otherwise}
% 			      \end{cases}
% 			      .
% 		      \end{equation}
% 	\end{itemize}
% \end{definition}

% \begin{remark}
% 	These formulas seem a bit random at first sight,
% 	but have a nice interpretation in the language of quivers.
% 	Assume that $B$ is skew-symmetric,
% 	and let $Q$ be the directed graph on $N$ vertices with $b_{ij}$ edges
% 	from $i$ to $j$ if $j \in \ex$. If $b_{ij}$ is negative,
% 	the edges have the opposite orientation.
% 	Now, define the mutation of $Q$ at vertex $k$ as follows:
% 	\begin{itemize}
% 		\item For every edge connected to $k$, flip its orientation.
% 		\item For every pair of edges $i\to k$ and $k\to j$, create an edge $i \to j$. Then
% 		      ``cancel'' any pair of edges between $i$ and $j$ with opposite orientation.
% 	\end{itemize}
% 	The new matrix representing this graph, will be given precisely by \cref{eq:matrix_mutation}.
% 	Furthermore, the exchange relation (\ref{eq:exchange_relation}) now takes the following form:
% 	\begin{equation*}
% 		x_kx_k' = \prod_{i \to k}x_i + \prod_{k \to j}x_i.
% 	\end{equation*}
% \end{remark}

% \medskip

% With these definitions out of the way we define the \emph{cluster algebra} associated
% to a seed as the subalgebra of $\mcF$ generated by the union of clusters of all seeds
% obtained through (iterative) mutations of the initial seed.

% Instead of proving things now for the classical case, we will jump directly to the
% quantized version to avoid having to prove the same results twice.

% \subsection{Quantum cluster algebras}

% \textbf{TODO: add more notation!}
% We will follow the notation as presented in \cite{GoodearlYakimov2017QCA}.
% Let $\bbK$ be any field.
% As a first step, we move from $\bbQ(Y_1, \dots, Y_N)$ to
% the \emph{quantum torus}
% \begin{equation*}
% 	\mcT_{\mathbf r} =
% 	\frac{\bbK\langle Y_1^{\pm 1}, \dots, Y_N^{\pm 1} \rangle}{\langle Y_iY_j = r_{ij}Y_jY_i \rangle},
% \end{equation*}
% where $\mathbf{r} \in M_N(\bbK^*)$ is a multiplicatively skew-symmetric matrix i.e.,
% $r_{ij} = r_{ji}\inv, r_{ii} = 1$.
% Associated to any such matrix, is a skew-symmetric bicharacter
% \footnote{With a bicharacter we mean a map from a direct product,
% 	such that each of the component maps is a group character.}:
% \begin{equation*}
% 	\Omega_{\mathbf{r}} \colon \bbZ^N \times \bbZ^N \to \bbK^* \colon
% 	\Omega_{\mathbf{r}}(e_i, e_j) = r_{ij}.
% \end{equation*}

% To prevent formulas from having $\frac{1}{2}$'s in the exponents, we will work with the
% \emph{quantum torus}\footnote{ The reason it's called a quantum torus is the following:
% 	it is a quantization of the coordinate algebra of the torus $(\bbK^{*})^N$. }
% $\mcT_{\mathbf{r}^{\cdot 2}}$, where
% \begin{equation*}
% 	\mathbf{r}^{\cdot 2} \coloneq (r_{ij}^2) \in M_N(\bbK^*).
% \end{equation*}
% This torus has a $\bbK$-basis consisting of elements
% \begin{equation*}
% 	Y^{(f)} \coloneq \mcS_{\mathbf{r}}(f)Y^f = \mcS_{\mathbf{r}}(f)Y_1^{m_1}\dots Y_N^{m_N}
% 	\text{ for } f = (m_1, \dots, m_n)^T \in \bbZ^N,
% \end{equation*}
% where
% \begin{equation*}
% 	\mcS_{\mathbf{r}}(f) \coloneq \prod_{i < j}r_{ij}^{-m_im_j}.
% \end{equation*}
% Then $Y^{(e_k)} = Y_k$ for all $k \in [1, N]$ as
% \begin{align*}
% 	Y^{(e_k)}
% 	 & = \mcS_{\mathbf{r}}(e_k)Y^{e_k}                      \\
% 	 & = (\prod_{i < j}r_{ij}^{-\delta_{ik}\delta{jk}} )Y_k \\
% 	 & = (\prod_{i < j}r_{ij}^0 )Y_k                        \\
% 	 & = Y_K.
% \end{align*}
% Additionally, we have the following multiplication rule for $f,g \in \bbZ^N$:
% \begin{equation*}
% 	Y^{(f)}Y^{(g)} = \Omega_{\mathbf{r}}(f,g)Y^{(f+g)}.
% \end{equation*}
% Indeed,
% \begin{align*}
% 	Y^{(f)}Y^{(g)}
% 	 & = \mcS_{\mathbf{r}}(f)Y^f\mcS_{\mathbf{r}}(g)Y^g                                    \\
% 	 & = (\prod_{i < j}r_{ij}^{-f_if_j})(\prod_{i}Y_i^{f_i})
% 	(\prod_{i < j}r_{ij}^{-g_ig_j})( \prod_{i}Y_i^{g_i})                                   \\
% 	 & = (\prod_{i < j}r_{ij}^{-f_if_j - g_ig_j})
% 	(\prod_{k}Y_k^{f_k})(\prod_{k}Y_k^{g_k})                                               \\
% 	 & = (\prod_{i < j}r_{ij}^{-f_if_j - g_ig_j})
% 	(\prod_{i < j}r_{ij}^{-2g_if_j})(\prod_{k}Y_k^{f_k + g_k})
% 	 & (Y_i^{f_i} Y_j^{g_j} = r_{ij}^{2f_ig_j}Y_j^{g_j}Y_i^{f_i})                          \\
% 	 & = (\prod_{i < j}r_{ij}^{-(f_if_j +2g_if_j + g_ig_j)})
% 	(\prod_{k}Y_k^{f_k + g_k})                                                             \\
% 	 & = (\prod_{i < j}r_{ij}^{f_ig_j - g_if_j})
% 	(\prod_{i < j}r_{ij}^{-(f_if_j + f_ig_j + g_if_j + f_ig_j)})(\prod_{k}Y_k^{f_k + g_k}) \\
% 	 & = (\prod_{i,j}r_{ij}^{f_ig_j})
% 	(\prod_{i < j}r_{ij}^{-(f_i + g_j)(f_j + g_j)})(\prod_{k}Y_k^{f_k + g_k})              \\
% 	 & = \Omega_{\mathbf{r}}(f,g)Y^{(f + g)}.
% \end{align*}
% The torus $\mcT_{\mathbf{r}^{\cdot 2}}$ with the basis $\{Y^(f) \mid f \in \bbZ^N\}$
% is called the \emph{based quantum torus} associated to the matrix $\mathbf{r}$.

% We now come to the analog of clusters in the quantum setting.
% \begin{definition}
% 	A map $M \colon \bbZ^N \to \mcF$ is called a \emph{toric frame} if there exists
% 	a multiplicatively skew-symmetric matrix $\mathbf{r} \in M_N(\bbK^*)$ such that:
% 	\begin{enumerate}
% 		\item There is an algebra embedding $\varphi \colon \mcT_{\mathbf{r}^{\cdot 2}} \injto \mcF$
% 		      given by $\varphi(Y_i) = M(e_i)$, such that $\mcF =
% 			      \Fract(\varphi(\mcT_{\mathbf{r}^{\cdot 2}}))$.
% 		\item For all $f \in \bbZ^N$, $M(f) = \varphi(Y^{(f)})$.
% 	\end{enumerate}
% \end{definition}
% \begin{remark}
% 	We can always recover the matrix $\mathbf{r}$ from the toric frame $M$,
% 	since
% 	\begin{align*}
% 		r_{ij}
% 		                         & = \Omega_{\mathbf{r}}(e_i, e_j)                    \\
% 		                         & = Y^{(e_i)}Y^{(e_j)}(Y^{(e_i + e_j)})\inv          \\
% 		                         & \Big\Updownarrow                                   \\
% 		r_{ij} = \varphi(r_{ij}) & = \varphi(Y^{(e_i)}Y^{(e_j)}(Y^{(e_i + e_j)})\inv) \\
% 		                         & = M(e_i)M(e_j)M(e_i + e_j)\inv.
% 	\end{align*}
% 	We'll use the notation $\mathbf{r}(M)$ to denote the matrix of the toric frame $M$.
% \end{remark}
% Now, for quantum seeds, we'll need an extra compatibility condition:
% \begin{definition}
% 	A \emph{quantum seed} is a pair $(M, \tB)$ consisting of a toric frame $M$
% 	and an $N \times n$ matrix $B$ over $\bbZ$ such that
% 	\begin{enumerate}
% 		\item The principal part of $\tB$ is skew-symmetrizable.
% 		\item The pair $(\mathbf{r}(M), \tB)$ is \emph{compatible}.
% 	\end{enumerate}
% \end{definition}

% So, what is this extra compatibility? In analogy with \cref{eq:exchange_relation} we
% want to define $\mu_k(M)$ in such a way that $\mu_k(M)(e_j) = M(e_j)$ for $j \neq k$
% and
% \begin{equation*}
% 	M(e_k)\mu_k(M)(e_k) = M([b^k]_+) + M(-[b^k]_-),
% \end{equation*}
% where $b^k$ is the $k$-th column of $B$.
% Bringing $M(e_k)$ to the other side,
% and ignoring eventual symmetrization constants we can then define
% \begin{equation*}
% 	\mu_k(M)(e_k) = M(-e_k + [b^k]_+) + M(-e_k - [b^k]_-).
% \end{equation*}
% Let $\epsilon$ be a sign $\pm 1$. Then we can rewrite the definition as
% \begin{align*}
% 	\mu_k(M)(e_k)
% 	 & = M(-e_k + [b^k]_+) + M(-e_k - [b^k]_-)                                    \\
% 	 & = M(-e_k + [-\epsilon b^k]_+) + M(-e_k - [-\epsilon b^k]_+ + \epsilon b^k) \\
% 	 & = M(E_\epsilon e_k) + M(E_\epsilon(e_k + \epsilon b^k)),
% \end{align*}
% where $E_\epsilon \in \GL_N(\bbZ)$ is the integer matrix with columns:
% \begin{equation*}
% 	E_\epsilon = (e_1, \dots ,e_{k-1}, [-\epsilon b^k]_+ -e_k, e_{k+1}, \dots, e_N).
% \end{equation*}
% Since, $E_\epsilon$ maps the basis $e_1, \dots, e_N$ of $\bbZ^N$ to another basis,
% and $E_\epsilon e_j = e_j$ for all $j \neq k$,
% we can ignore it when checking that $\mu_k(M)$ defines a toric frame.
% In other words,
% we just need that $M' : \bbZ^N \to \mcF$ defines a toric frame, where
% \begin{align*}
% 	M'(e_j) = M(e_j), j\neq k \quad M'(e_k) = M(e_k) + M(e_k + \epsilon b^k).
% \end{align*}
% On the one hand we have
% \begin{align*}
% 	M'(e_k)M'(e_j)
% 	 & = (M(e_k) + M(e_k + \epsilon b^k))M(e_j)                                                                                \\
% 	 & = M(e_j)(\Omega_{\mathbf{r}}(e_k, e_j)^2 M(e_k) + \Omega_{\mathbf{r}}(e_k + \epsilon b^k, e_j)^2 M(e_k + \epsilon b^k)) \\
% 	 & =\Omega_{\mathbf{r}}(e_k, e_j)^2  M(e_j)(M(e_k) + \Omega_{\mathbf{r}}(\epsilon b^k, e_j)^2 M(e_k + \epsilon b^k))       \\
% 	 & =\mathbf{r}_{k,j}^2  M(e_j)(M(e_k) + \Omega_{\mathbf{r}}(b^k, e_j)^{2 \epsilon} M(e_k + \epsilon b^k)),
% \end{align*}
% while $M'$ being a toric frame would imply
% \begin{align*}
% 	M'(e_k)M'(e_j) = (\mathbf{r}'_{k,j})^2 M'(e_j)M'(e_k).
% \end{align*}
% The easiest way to make the two equations compatible,
% is to demand $\mathbf{r}' = \mathbf{r}$,
% and $\Omega_{\mathbf{r}}(b^k, e_j) = 1$ for $j \neq k$.
% \textbf{TODO: is this the only possible choice?}
% This leads to the following definition:
% \begin{definition}
% 	Let $\tilde{\mathbf{t}} \in M_{n \times N}(\bbK^*)$ be the matrix with entries
% 	\begin{equation*}
% 		t_{ij} = \Omega_{\mathbf{r}}(b^i, e_j) = \prod_{l = 1}^N r_{lj}^{b_{li}},
% 	\end{equation*}
% 	for $j \in \mathbf{ex}$ and $j \in [1, N]$.
% 	We say that $B$ and $\mathbf{r}$ are \emph{compatible} if
% 	$t_{ij} = 1$ whenever $i \neq j$,
% 	and all the $t_{ii}$ are \emph{not} roots of unity.
% \end{definition}
% \textbf{TODO: How to explain the root of unity part? Is there a clean way?}

